version: 0.0
os: linux

files:
  - source: /
    destination: /opt/app
#     overwrite: yes
permissions:
  - object: /opt/app/
    owner: ubuntu
    group: ubuntu
    mode: 755
hooks:
  AfterInstall:
    - location: /scripts/run_new_was.sh
      timeout: 120
      runas: root
    - location: /scripts/health_check.sh
      timeout: 120
      runas: root
    - location: /scripts/switch.sh
      timeout: 120
      runas: root

#hooks:
#  AfterInstall:
#    - location: /script/stop.sh # 엔진엑스와 연결되어 있지 않은 스프링 부트를 종료
#      timeout: 60
#      runas: root
#  ApplicationStart:
#    - location: /script/start.sh # 엔진엑스와 연결되어 있지 않은 Port 로 새 버전의 스프링 부트를 시작
#      timeout: 60
#      runas: root
#  ValidateService:
#    - location: /script/health.sh # 새 스프링 부트가 정상적으로 실행됐는지 확인
#      timeout: 60
#      runas: root
